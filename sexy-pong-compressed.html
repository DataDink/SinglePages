<!DOCTYPE html>
<!-- This is a single-file portable game. The only external references are to media files such as images and sounds. -->
<!-- All external references are configurable to allow manipulation -->
<!-- Only base game code and styles are compressed to decrease file size. -->
<!-- The project uncompressed source will be available at https://github.com/datadink -->
<html>
	<head>
		<style type="text/css">
			html { height:100%; margin:0; padding:0; position:absolute; width:100%; }  body { display:block; height:100%; margin:0; padding:0; position:absolute; width:100%; }  #game-container { bottom:0; cursor:none; height:300px; left:0; margin:auto; overflow:hidden; padding:0; position:absolute; right:0; top:0; width:300px; }  #game-container > * { display:none; margin:0; padding:0; position:absolute; }  #ball { background:blue; height:50px; width:50px; }  #paddle-left,#paddle-right { height:25%; width:25px; }  #paddle-top,#paddle-bottom { height:25px; width:25%; }  .computer { background:red; }  .player { background:green; }  #load-screen { display:block; height:100%; width:100%; }  #load-screen * { bottom:0; display:block; height:25px; left:0; margin:auto; position:absolute; right:0; text-align:center; top:0; }  #start-screen { cursor:pointer; height:100%; width:100%; }  #logo { bottom:0; height:100px; margin:auto; position:absolute; text-align:center; top:0; width:100%; }  #start-button { bottom:100px; height:25px; left:0; margin:auto; position:absolute; right:0; text-align:center; width:100px; }  #round-screen { display:block; height:100%; position:absolute; width:100%; }  #round-screen * { bottom:0; display:block; font-size:150px; height:150px; left:0; margin:auto; padding:0; position:absolute; right:0; text-align:center; top:0; width:150px; }  #computer-ui { left:35px; position:absolute; top:35px; }  #player-ui { bottom:35px; position:absolute; right:35px; }  #computer-ui *,#player-ui * { display:inline-block; }
		</style>
	</head>
	<body>
		
		<div id="game-container">
			
			<div id="computer-ui">Computer's Score: <div id="computer-score">0</div></div>
			<div id="player-ui">Your Score: <div id="player-score">0</div></div>
			
			<div id="ball"></div>
			<div id="paddle-left" class="computer"></div>
			<div id="paddle-right" class="player"></div>
			<div id="paddle-top" class="computer"></div>
			<div id="paddle-bottom" class="player"></div>
			
			<div id="round-screen"><h1 class="hidden" style="display: none;">3</h1><h1 class="hidden" style="display: none;">2</h1><h1 class="hidden" style="display: none;">1</h1></div>
			<div id="point-screen"><h1 class="hidden"></h1></div>
			<div id="start-screen"><h1 id="logo">Sexy Pong</h1><div id="start-button">-start game-</div></div>
			<div id="load-screen"><h1>Loading...</h1></div>
		
			<div id="sounds">
				<div id="computer-point-sounds">
					<!-- Put audio tags in here -->
				</div>
				<div id="player-point-sounds">
					<!-- Put audio tags in here -->
				</div>
				<div id="computer-hit-sounds">
					<!-- Put audio tags in here -->
				</div>
				<div id="player-hit-sounds">
					<!-- Put audio tags in here -->
				</div>
			</div>
		</div>
		
		<script type="text/javascript">
			(function() { // scope
				// settings
				var gutterSize = 30;
				var gameSpeed = .003; 
				var speedPerLevel = .00001; 
				var computerHandicap = 2;
				
				// Compressed - please visit https://github.com/datadink for source
				var L=document.getElementById("game-container");var I=document.getElementById("start-screen");var X=document.getElementById("load-screen");var h=document.getElementById("start-button");var x=document.getElementById("round-screen");var J=document.getElementById("computer-ui");var u=document.getElementById("player-ui");var N=document.getElementById("computer-score");var w=document.getElementById("player-score");var G=document.getElementById("ball");var Q=document.getElementById("paddle-left");var D=document.getElementById("paddle-right");var W=document.getElementById("paddle-top");var p=document.getElementById("paddle-bottom");var v=[];var K=[];var j=document.getElementById("computer-point-sounds");var o=document.getElementById("player-point-sounds");var F=document.getElementById("computer-hit-sounds");var y=document.getElementById("player-hit-sounds");var V=0;var c=0;var T={x:0.5,y:0.5,d:0};var B={x:0,y:0};var U;setTimeout(function(){I.style.display="block";X.style.display="none";h.addEventListener("click",P);},1000);function P(){I.style.display="none";f(Q);f(D);f(W);f(p);m(J);m(u);L.addEventListener("mousemove",r);M();}var S=0;function M(){clearInterval(U);for(var aa=0;aa<K.length;aa++){var ac=K[aa];var ab=O(ac);if(i(ac)){ac.style.left=(l().width/2-ab.width/2)+"px";}else{ac.style.top=(l().height/2-ab.height/2)+"px";}}n(function(){A();U=setInterval(function(){R();if(S++>computerHandicap){S=0;for(var ad=0;ad<K.length;ad++){k(K[ad]);}}if(H()){q();M();}},10);});}function n(ad){var ac=1000;var aa=[];for(var ab=0;ab<x.childNodes.length;ab++){aa.push(x.childNodes[ab]);setTimeout(function(){var ae=aa.shift();ae.style.display="";ae.className="";setTimeout(function(){ae.className="hidden";ae.style.display="none";},1000);},ac);ac+=1000;}setTimeout(ad,ac);}function m(aa){aa.style.display="block";}function q(){N.innerHTML="";N.appendChild(document.createTextNode(V));w.innerHTML="";w.appendChild(document.createTextNode(c));}function f(ab){if(!ab){return;}ab.style.display="block";ab.gameData={wall:ab.id.substr("paddle-".length).toLowerCase(),controller:(" "+ab.className+" ").toLowerCase().indexOf(" player ")>=0?"player":"computer"};var aa=O(ab);if(ab.gameData.wall==="left"){ab.style.right="auto";ab.style.bottom="auto";ab.style.left=(gutterSize-aa.width)+"px";}else{if(ab.gameData.wall==="right"){ab.style.left="auto";ab.style.bottom="auto";ab.style.right=(gutterSize-aa.width)+"px";}else{if(ab.gameData.wall==="top"){ab.style.bottom="auto";ab.style.right="auto";ab.style.top=(gutterSize-aa.height)+"px";}else{if(ab.gameData.wall==="bottom"){ab.style.top="auto";ab.style.right="auto";ab.style.bottom=(gutterSize-aa.height)+"px";}}}}if(ab.gameData.controller==="player"){v.push(ab);}if(ab.gameData.controller==="computer"){K.push(ab);}}function A(){G.style.display="block";T.d=Math.random()*360;T.x=0.5;T.y=0.5;e();}function l(){var ab=L.getBoundingClientRect();var aa={left:ab.left,top:ab.top,right:ab.right,bottom:ab.bottom,width:L.offsetWidth,height:L.offsetHeight};return aa;}function O(ab){var aa=L.getBoundingClientRect();var ad=ab.getBoundingClientRect();var ac={left:ad.left-aa.left,top:ad.top-aa.top,right:aa.right-ad.right,bottom:aa.bottom-ad.bottom,width:ab.offsetWidth,height:ab.offsetHeight};return ac;}function r(ac){var ab=l();B.x=Math.round(ac.clientX)-ab.left;B.y=Math.round(ac.clientY)-ab.top;for(var aa=0;aa<v.length;aa++){z(v[aa]);}}function z(ab){var aa=O(ab);if(!i(ab)){ab.style.top=(B.y-(aa.height/2))+"px";}else{ab.style.left=(B.x-(aa.width/2))+"px";}}function k(aj){var ai=i(aj);var ag=O(G);var ah=ai?ag.left+ag.width/2:ag.top+ag.height/2;var ak=O(aj);var al=ai?ak.left:ak.top;var af=ai?ak.left+ak.width:ak.top+ak.height;var ac=ah>af;var ae=ah<al;var ab=ac?ah-af:ae?al-ah:0;if(ab===0){return;}var aa=s();var ad=Math.min(ai?aa.x:aa.y,ab);if(ae&&ai){aj.style.left=Math.round(ak.left-ad)+"px";}else{if(ae&&!ai){aj.style.top=Math.round(ak.top-ad)+"px";}else{if(ac&&ai){aj.style.left=Math.round(ak.left+ad)+"px";}else{if(ac&&!ai){aj.style.top=Math.round(ak.top+ad)+"px";}}}}}function R(){var aa=O(G);var ac=d();var ab=E(T.d);T.x+=ab.x*ac;T.y+=ab.y*ac;e();}function e(){var ac=O(G);var ab=l();var aa=ab.width*T.x-ac.width/2;var ad=ab.height*T.y-ac.height/2;G.style.left=Math.round(aa)+"px";G.style.top=Math.round(ad)+"px";}function b(){return Math.max(1,c);}function d(){return b()*speedPerLevel+gameSpeed;}function s(){var aa=l();var ab=d()*(computerHandicap+1)*0.9;return{x:Math.max(1,Math.round(ab*aa.width)),y:Math.max(1,Math.round(ab*aa.height))};}function i(aa){return aa.gameData.wall==="top"||aa.gameData.wall==="bottom";}function E(ab){var aa=ab/180*Math.PI;return{x:Math.cos(aa),y:Math.sin(aa)};}function Z(aa){return Math.atan2(aa.y,aa.x)*180/Math.PI;}function H(){var af=O(G);var ag=[Q,W,D,p];if(af.left<=0){return Y(Q);}if(af.top<=0){return Y(W);}if(af.right<=0){return Y(D);}if(af.bottom<=0){return Y(p);}for(var ab=0;ab<ag.length;ab++){var ae=ag[ab];if(!ae){continue;}var aa=O(ae);var ad=af.left<aa.left+aa.width&&af.left+af.width>aa.left;var ac=af.top<aa.top+aa.height&&af.top+af.height>aa.top;if(ad&&ac){a(ae);return false;}}}function Y(aa){if(aa){if(aa.gameData.controller==="player"){V++;}else{c++;}g(aa);return true;}var ab=E(T.d);if(!i(aa)){T.d=Z({x:-ab.x,y:ab.y});}else{T.d=Z({x:ab.x,y:-ab.y});}}function a(ae){var aa=O(ae);var ac={x:aa.left+aa.width/2,y:aa.top+aa.height/2};var ad=O(G);var ab={x:ad.left+ad.width/2,y:ad.top+ad.height/2};var af=Z({x:ac.x-ab.x,y:ac.y-ab.y});T.d=af+180;t(ae);}function g(aa){var ab=aa.gameData.controller==="player"?o:j;C(ab);}function t(aa){var ab=aa.gameData.controller==="player"?y:F;C(ab);}function C(ad){if(!ad||ad.childNodes.length===0){return;}var aa=[];for(var ac=0;ac<ad.childNodes.length;ac++){if(ad.childNodes[ac].tagName&&ad.childNodes[ac].tagName.toLowerCase()==="audio"){aa.push(ad.childNodes[ac]);}}if(aa.length===0){return;}var ab=Math.round(Math.random()*(aa.length-1));var ae=aa[ab];ae.play();}
			})();
		
		</script>
	</body>
</html>